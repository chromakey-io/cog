{"version":3,"file":"dialog.js","sources":["../src/subject/dialog.js"],"sourcesContent":["import {LitElement, html, css} from 'lit-element';\n\nimport {ErrorMessage} from '../utils.js';\n\nexport class SubjectDialog extends LitElement {\n\n    static get styles() {\n        return css`\n            mwc-textfield {\n                width:100%;\n            }\n        `;\n    }\n    constructor (options) {\n        super();\n        this._token = options.token;\n        this.subjects_list = options.subjects_list;\n    }\n\n    get identity() {\n        return this.shadowRoot.getElementById('identity').value\n    }\n\n    get birthdate() {\n        return this.shadowRoot.getElementById('birthdate').value\n    }\n\n    render() {\n        const drawer = document.getElementsByTagName('mwc-drawer')[0];\n        drawer.open = false;\n\n        return html`\n            <mwc-dialog id=\"id-dialog\" heading=\"Identity\" open>\n                <p>Create a new subject:</p>\n                <p>\n                <mwc-textfield outlined label=\"Identity\" icon=\"face\" maxLength=\"255\" required=\"true\" id=\"identity\"></mwc-textfield>\n                </p>\n                <p>\n                <mwc-textfield outlined label=\"Birthdate\" helper=\"Birthdate\" required=\"true\" icon=\"today\" type=\"date\" id=\"birthdate\"></mwc-textfield>\n                </p>\n                <mwc-button id=\"submit-id\" @click=${this.handler} slot=\"primaryAction\">Confirm</mwc-button>\n                <mwc-button id=\"cancel-id\" @click=${this.destroy} slot=\"secondaryAction\" dialogAction=\"close\">Cancel</mwc-button>\n            </mwc-dialog>`;\n    }\n\n    async handler() {\n        const data = JSON.stringify({\n            'identity': this.identity,\n            'birthdate': this.birthdate\n        });\n\n        const response = await fetch('/subject', {\n                method: 'POST',\n                headers: {\n                    Authorization: 'Bearer: ' + this._token\n                },\n                body: data\n        });\n\n        if (response.status == 200) {\n            const data = await response.json();\n        } else {\n            const error = new ErrorMessage({'message':\"Error Saving Subject\"});\n            document.getElementById('content').appendChild(error);\n        }\n        await this.destroy();\n    }\n\n    async destroy() {\n        this.subjects_list.handler();\n        this.remove();\n    }\n};\n\nwindow.customElements.define('subject-dialog', SubjectDialog);"],"names":[],"mappings":";;;AAIO,MAAM,aAAa,SAAS,UAAU,CAAC;AAC9C;AACA,IAAI,WAAW,MAAM,GAAG;AACxB,QAAQ,OAAO,GAAG,CAAC;AACnB;AACA;AACA;AACA,QAAQ,CAAC,CAAC;AACV,KAAK;AACL,IAAI,WAAW,CAAC,CAAC,OAAO,EAAE;AAC1B,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC;AACpC,QAAQ,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;AACnD,KAAK;AACL;AACA,IAAI,IAAI,QAAQ,GAAG;AACnB,QAAQ,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,KAAK;AAC/D,KAAK;AACL;AACA,IAAI,IAAI,SAAS,GAAG;AACpB,QAAQ,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK;AAChE,KAAK;AACL;AACA,IAAI,MAAM,GAAG;AACb,QAAQ,MAAM,MAAM,GAAG,QAAQ,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;AACtE,QAAQ,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;AAC5B;AACA,QAAQ,OAAO,IAAI,CAAC;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,EAAE,IAAI,CAAC,OAAO,CAAC;AACjE,kDAAkD,EAAE,IAAI,CAAC,OAAO,CAAC;AACjE,yBAAyB,CAAC,CAAC;AAC3B,KAAK;AACL;AACA,IAAI,MAAM,OAAO,GAAG;AACpB,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;AACpC,YAAY,UAAU,EAAE,IAAI,CAAC,QAAQ;AACrC,YAAY,WAAW,EAAE,IAAI,CAAC,SAAS;AACvC,SAAS,CAAC,CAAC;AACX;AACA,QAAQ,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,UAAU,EAAE;AACjD,gBAAgB,MAAM,EAAE,MAAM;AAC9B,gBAAgB,OAAO,EAAE;AACzB,oBAAoB,aAAa,EAAE,UAAU,GAAG,IAAI,CAAC,MAAM;AAC3D,iBAAiB;AACjB,gBAAgB,IAAI,EAAE,IAAI;AAC1B,SAAS,CAAC,CAAC;AACX;AACA,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,EAAE;AACpC,YAAY,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AAC/C,SAAS,MAAM;AACf,YAAY,MAAM,KAAK,GAAG,IAAI,YAAY,CAAC,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC;AAC/E,YAAY,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAClE,SAAS;AACT,QAAQ,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC;AAC7B,KAAK;AACL;AACA,IAAI,MAAM,OAAO,GAAG;AACpB,QAAQ,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;AACrC,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;AACtB,KAAK;AACL,CACA;AACA,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,gBAAgB,EAAE,aAAa,CAAC;;;;"}