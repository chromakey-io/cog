{"version":3,"file":"dialog-faa8189b.js","sources":["../src/subject/dialog.js"],"sourcesContent":["import {LitElement, html} from 'lit-element';\n\nimport {ErrorMessage} from '../utils.js';\n\nexport class SubjectDialog extends LitElement {\n\n    constructor (options) {\n        super();\n        this._token = options.token;\n        this.subjects_list = options.subjects_list;\n    }\n\n    get identity() {\n        return this.shadowRoot.getElementById('identity').value\n    }\n\n    get birthdate() {\n        return this.shadowRoot.getElementById('birthdate').value\n    }\n\n    render() {\n        const drawer = document.getElementsByTagName('mwc-drawer')[0];\n        drawer.open = false;\n\n        return html`\n            <mwc-dialog id=\"id-dialog\" heading=\"Identity\" open>\n                <p>Create a new subject:</p>\n                <p>\n                <mwc-textfield outlined label=\"Identity\" icon=\"face\" maxLength=\"255\" required=\"true\" id=\"identity\"></mwc-textfield>\n                </p>\n                <p>\n                    <mwc-textfield outlined label=\"Birthdate\" helper=\"Birthdate\" required=\"true\" icon=\"today\" type=\"date\" id=\"birthdate\"></mwc-textfield>\n                </p>\n                <mwc-button id=\"submit-id\" @click=${this.handler} slot=\"primaryAction\">Confirm</mwc-button>\n                <mwc-button id=\"cancel-id\" @click=${this.destroy} slot=\"secondaryAction\" dialogAction=\"close\">Cancel</mwc-button>\n            </mwc-dialog>`;\n    }\n\n    async handler() {\n        const data = JSON.stringify({\n            'identity': this.identity,\n            'birthdate': this.birthdate\n        });\n\n        const response = await fetch('/subject', {\n                method: 'POST',\n                headers: {\n                    Authorization: 'Bearer: ' + this._token\n                },\n                body: data\n        });\n\n        if (response.status == 200) {\n            const data = await response.json();\n        } else {\n            const error = new ErrorMessage({'message':\"Error Saving Subject\"});\n            document.getElementById('content').appendChild(error);\n        }\n        await this.destroy();\n    }\n\n    async destroy() {\n        this.subjects_list.handler();\n        this.remove();\n    }\n};\n\nwindow.customElements.define('subject-dialog', SubjectDialog);"],"names":["SubjectDialog","LitElement","[object Object]","options","super","this","_token","token","subjects_list","identity","shadowRoot","getElementById","value","birthdate","document","getElementsByTagName","open","html","handler","destroy","data","JSON","stringify","response","fetch","method","headers","Authorization","body","status","json","error","ErrorMessage","message","appendChild","remove","window","customElements","define"],"mappings":"yFAIO,MAAMA,UAAsBC,EAE/BC,YAAaC,GACTC,QACAC,KAAKC,OAASH,EAAQI,MACtBF,KAAKG,cAAgBL,EAAQK,cAGjCC,eACI,OAAOJ,KAAKK,WAAWC,eAAe,YAAYC,MAGtDC,gBACI,OAAOR,KAAKK,WAAWC,eAAe,aAAaC,MAGvDV,SAII,OAHeY,SAASC,qBAAqB,cAAc,GACpDC,MAAO,EAEPC,CAAI;;;;;;;;;oDASiCZ,KAAKa;oDACLb,KAAKc;2BAIrDjB,gBACI,MAAMkB,EAAOC,KAAKC,UAAU,CACxBb,SAAYJ,KAAKI,SACjBI,UAAaR,KAAKQ,YAGhBU,QAAiBC,MAAM,WAAY,CACjCC,OAAQ,OACRC,QAAS,CACLC,cAAe,WAAatB,KAAKC,QAErCsB,KAAMR,IAGd,GAAuB,KAAnBG,EAASM,OAAe,OACLN,EAASO,WACzB,CACH,MAAMC,EAAQ,IAAIC,EAAa,CAACC,QAAU,yBAC1CnB,SAASH,eAAe,WAAWuB,YAAYH,SAE7C1B,KAAKc,UAGfjB,gBACIG,KAAKG,cAAcU,UACnBb,KAAK8B,UAIbC,OAAOC,eAAeC,OAAO,iBAAkBtC"}